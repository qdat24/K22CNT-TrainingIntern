{% extends "admin/base.html" %}

{% block title %}Qu·∫£n L√Ω S·∫£n Ph·∫©m{% endblock %}

{% block content %}
<div class="page-header">
    <h1>üì¶ Qu·∫£n L√Ω S·∫£n Ph·∫©m</h1>
    <p>Danh s√°ch t·∫•t c·∫£ s·∫£n ph·∫©m</p>
</div>

<div class="card">
    <div class="card-header" style="display: flex; justify-content: space-between; align-items: center;">
        <h3>Danh S√°ch S·∫£n Ph·∫©m ({{ products|length }})</h3>
        <a href="{{ url_for('admin_add_product') }}" class="btn btn-success">+ Th√™m S·∫£n Ph·∫©m M·ªõi</a>
    </div>

    {% if products %}
    <div style="overflow-x: auto;">
        <table class="table">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>H√¨nh ·∫¢nh</th>
                    <th>T√™n S·∫£n Ph·∫©m</th>
                    <th>Danh M·ª•c</th>
                    <th>Gi√°</th>
                    <th>Gi√° G·ªëc</th>
                    <th>ƒê√°nh Gi√°</th>
                    <th>T·ªìn Kho</th>
                    <th>Tr·∫°ng Th√°i</th>
                    <th>Thao T√°c</th>
                </tr>
            </thead>
            <tbody>
                {% for product in products %}
                <tr>
                    <td>{{ product.id }}</td>
                    <td>
                        {% if product.image %}
                        <img src="{{ product.image }}" alt="{{ product.name }}" style="width: 60px; height: 60px; object-fit: cover; border-radius: 5px;">
                        {% else %}
                        <div style="width: 60px; height: 60px; background: #eee; border-radius: 5px; display: flex; align-items: center; justify-content: center;">No Image</div>
                        {% endif %}
                    </td>
                    <td><strong>{{ product.name }}</strong></td>
                    <td>{{ product.category }}</td>
                    <td><strong>{{ "{:,.0f}".format(product.price) }} ‚Ç´</strong></td>
                    <td style="text-decoration: line-through; color: #999;">{{ "{:,.0f}".format(product.original_price) }} ‚Ç´</td>
                    <td>
                        <span style="color: #f39c12;">‚òÖ {{ product.rating }}</span>
                        <span style="color: #999; font-size: 12px;">({{ product.reviews }})</span>
                    </td>
                    <td>
                        {% if product.stock > 10 %}
                            <span style="color: #27ae60;">{{ product.stock }}</span>
                        {% elif product.stock > 0 %}
                            <span style="color: #f39c12;">{{ product.stock }}</span>
                        {% else %}
                            <span style="color: #e74c3c;">H·∫øt h√†ng</span>
                        {% endif %}
                    </td>
                    <td>
                        {% if product.is_active %}
                            <span style="color: #27ae60; font-weight: bold;">‚úì Ho·∫°t ƒë·ªông</span>
                        {% else %}
                            <span style="color: #e74c3c;">‚úó ·∫®n</span>
                        {% endif %}
                    </td>
                    <td>
                        <a href="{{ url_for('admin_edit_product', product_id=product.id) }}" class="btn btn-warning" style="padding: 5px 10px; font-size: 12px; margin-right: 5px;">S·ª≠a</a>
                        <form method="POST" action="{{ url_for('admin_delete_product', product_id=product.id) }}" style="display: inline;" onsubmit="return confirm('B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a s·∫£n ph·∫©m n√†y?');">
                            <button type="submit" class="btn btn-danger" style="padding: 5px 10px; font-size: 12px;">X√≥a</button>
                        </form>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% else %}
    <p style="text-align: center; color: #7f8c8d; padding: 40px;">Ch∆∞a c√≥ s·∫£n ph·∫©m n√†o</p>
    {% endif %}
</div>
{% endblock %}
