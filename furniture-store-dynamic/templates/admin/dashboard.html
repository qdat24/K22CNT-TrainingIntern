{% extends "admin/base.html" %}

{% block title %}Dashboard{% endblock %}

{% block content %}
<div class="page-header">
    <h1>ğŸ“Š Dashboard</h1>
    <p>Tá»•ng quan há»‡ thá»‘ng</p>
</div>

<div class="stats-grid">
    <div class="stat-card">
        <h3>Tá»•ng Sáº£n Pháº©m</h3>
        <div class="stat-value">{{ stats.total_products }}</div>
    </div>

    <div class="stat-card">
        <h3>Tá»•ng ÄÆ¡n HÃ ng</h3>
        <div class="stat-value">{{ stats.total_orders }}</div>
    </div>

    <div class="stat-card">
        <h3>Tá»•ng Doanh Thu</h3>
        <div class="stat-value">
            {% if stats.revenue and stats.revenue.total_revenue %}
                {{ "{:,.0f}".format(stats.revenue.total_revenue) }} â‚«
            {% else %}
                0 â‚«
            {% endif %}
        </div>
    </div>

    <div class="stat-card">
        <h3>GiÃ¡ Trá»‹ ÄÆ¡n TB</h3>
        <div class="stat-value">
            {% if stats.revenue and stats.revenue.avg_order_value %}
                {{ "{:,.0f}".format(stats.revenue.avg_order_value) }} â‚«
            {% else %}
                0 â‚«
            {% endif %}
        </div>
    </div>
</div>

<div class="card">
    <div class="card-header">
        <h3>ğŸ›’ ÄÆ¡n HÃ ng Gáº§n ÄÃ¢y</h3>
    </div>

    {% if recent_orders %}
    <table class="table">
        <thead>
            <tr>
                <th>MÃ£ ÄÆ¡n</th>
                <th>KhÃ¡ch HÃ ng</th>
                <th>Tá»•ng Tiá»n</th>
                <th>Tráº¡ng ThÃ¡i</th>
                <th>Thanh ToÃ¡n</th>
                <th>NgÃ y Äáº·t</th>
                <th>Thao TÃ¡c</th>
            </tr>
        </thead>
        <tbody>
            {% for order in recent_orders %}
            <tr>
                <td><strong>{{ order.order_id }}</strong></td>
                <td>{{ order.customer_name }}</td>
                <td>{{ "{:,.0f}".format(order.total) }} â‚«</td>
                <td>
                    {% if order.status == 'pending' %}
                        <span style="color: #f39c12;">â³ Chá» xá»­ lÃ½</span>
                    {% elif order.status == 'confirmed' %}
                        <span style="color: #3498db;">âœ“ ÄÃ£ xÃ¡c nháº­n</span>
                    {% elif order.status == 'shipping' %}
                        <span style="color: #9b59b6;">ğŸšš Äang giao</span>
                    {% elif order.status == 'completed' %}
                        <span style="color: #27ae60;">âœ“ HoÃ n thÃ nh</span>
                    {% else %}
                        <span style="color: #e74c3c;">âœ— {{ order.status }}</span>
                    {% endif %}
                </td>
                <td>
                    {% if order.payment_status == 'pending' %}
                        <span style="color: #f39c12;">ChÆ°a thanh toÃ¡n</span>
                    {% elif order.payment_status == 'paid' %}
                        <span style="color: #27ae60;">ÄÃ£ thanh toÃ¡n</span>
                    {% else %}
                        {{ order.payment_status }}
                    {% endif %}
                </td>
                <td>{{ order.created_at.strftime('%d/%m/%Y %H:%M') if order.created_at else 'N/A' }}</td>
                <td>
                    <a href="{{ url_for('admin_order_detail', order_id=order.order_id) }}" class="btn btn-primary" style="padding: 5px 10px; font-size: 12px;">Xem</a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
    <p style="text-align: center; color: #7f8c8d; padding: 20px;">ChÆ°a cÃ³ Ä‘Æ¡n hÃ ng nÃ o</p>
    {% endif %}
</div>
{% endblock %}
